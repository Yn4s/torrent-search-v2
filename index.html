<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>REMUX Search Hub - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</title>
    <style>
        :root {
            --primary: #00b894;
            --secondary: #6c5ce7;
            --dark: #111;
            --dark-gray: #1e1e1e;
            --medium-gray: #222;
            --light-gray: #333;
            --text: #eee;
            --accent: #81ecec;
            --yellow: #fdcb6e;
            --red: #ff7675;
            --green: #55efc4;
        }
        body {
            font-family: Arial, sans-serif;
            background-color: var(--dark);
            color: var(--text);
            text-align: center;
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        .search-container {
            background-color: var(--medium-gray);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }
        input[type="text"] {
            padding: 12px;
            width: 70%;
            font-size: 16px;
            border-radius: 5px;
            border: none;
            margin: 10px 0;
            background-color: var(--light-gray);
            color: var(--text);
        }
        button {
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 5px;
            border: none;
            background-color: var(--primary);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin: 10px 5px;
        }
        button:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }
        .filters-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            background-color: var(--dark-gray);
            padding: 15px;
            border-radius: 8px;
        }
        .filter-group {
            text-align: right;
        }
        .filter-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--accent);
            font-size: 14px;
        }
        .filter-group select, .filter-group input {
            padding: 8px 12px;
            border-radius: 5px;
            border: none;
            background-color: var(--light-gray);
            color: var(--text);
        }
        .results {
            margin-top: 30px;
            text-align: right;
        }
        .result-item {
            background-color: var(--dark-gray);
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .result-item:hover {
            transform: translateX(-5px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        .site-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .site-name {
            color: var(--primary);
            font-weight: bold;
            font-size: 18px;
        }
        .site-status {
            font-size: 12px;
            padding: 3px 8px;
            border-radius: 10px;
            background-color: var(--light-gray);
        }
        .online {
            color: var(--green);
        }
        .offline {
            color: var(--red);
        }
        .result-link {
            color: var(--accent);
            text-decoration: none;
            display: block;
            margin-top: 8px;
            word-break: break-all;
        }
        .rating {
            display: flex;
            align-items: center;
            margin: 8px 0;
            flex-wrap: wrap;
            gap: 5px;
        }
        .stars {
            color: var(--yellow);
            font-size: 18px;
        }
        .rating-count {
            color: #b2bec3;
            font-size: 14px;
        }
        .rate-btn {
            background: none;
            border: none;
            color: var(--accent);
            cursor: pointer;
            font-size: 12px;
            padding: 2px 5px;
        }
        .rate-btn:hover {
            text-decoration: underline;
        }
        .rating-form {
            display: none;
            background: var(--light-gray);
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
        }
        .rating-form.active {
            display: block;
        }
        .site-stats {
            display: flex;
            gap: 10px;
            font-size: 13px;
            color: #b2bec3;
            margin-top: 5px;
        }
        .stat {
            display: flex;
            align-items: center;
        }
        .suggestions {
            margin: 10px 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
        }
        .suggestion {
            background-color: var(--light-gray);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }
        .suggestion:hover {
            background-color: var(--primary);
            color: white;
        }
        .favorites-bar {
            margin: 15px 0;
            text-align: left;
        }
        .favorite-btn {
            background-color: var(--secondary);
            padding: 8px 15px;
            font-size: 14px;
        }
        .favorite-item {
            background-color: rgba(108, 92, 231, 0.2);
            border-left: 3px solid var(--secondary);
        }
        .hidden {
            display: none;
        }
        .favorites-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .favorite-tag {
            background-color: var(--secondary);
            color: white;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 12px;
            display: flex;
            align-items: center;
        }
        .favorite-tag button {
            background: none;
            border: none;
            color: white;
            margin-left: 5px;
            padding: 0;
            font-size: 10px;
        }
    </style>
</head>
<body>
    <h1>REMUX Search Hub ğŸ¬ <span style="font-size: 16px; color: var(--accent);">(Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©)</span></h1>
    
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„ÙÙŠÙ„Ù… Ø£Ùˆ Ø§Ù„Ù…Ø³Ù„Ø³Ù„..." autofocus>
        <button onclick="search()">Ø§Ø¨Ø­Ø«</button>
        
        <div class="suggestions" id="suggestions">
            <span>Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª: </span>
            <span class="suggestion" onclick="applySuggestion('1080p')">1080p</span>
            <span class="suggestion" onclick="applySuggestion('2160p')">2160p</span>
            <span class="suggestion" onclick="applySuggestion('REMUX')">REMUX</span>
            <span class="suggestion" onclick="applySuggestion('BluRay')">BluRay</span>
            <span class="suggestion" onclick="applySuggestion('Dual Audio')">Dual Audio</span>
        </div>
    </div>

    <div class="filters-container">
        <div class="filter-group">
            <label>ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</label>
            <select id="ratingFilter" onchange="filterByRating()">
                <option value="0">Ø§Ù„ÙƒÙ„</option>
                <option value="4">â­ 4+ Ù†Ø¬ÙˆÙ…</option>
                <option value="3">â­ 3+ Ù†Ø¬ÙˆÙ…</option>
            </select>
        </div>
        
        <div class="filter-group">
            <label>ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨</label>
            <select id="sortBy" onchange="sortResults()">
                <option value="default">Ø§Ù„Ø¥ÙØªØ±Ø§Ø¶ÙŠ</option>
                <option value="rating">Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Ù‹</option>
                <option value="name">Ø­Ø³Ø¨ Ø§Ù„Ø§Ø³Ù… (Ø£-ÙŠ)</option>
            </select>
        </div>
    </div>

    <div class="favorites-bar">
        <button class="favorite-btn" onclick="toggleFavorites()">â˜… Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹ Ø§Ù„Ù…ÙØ¶Ù„Ø©</button>
        <div id="favorites-list" class="hidden favorites-list"></div>
    </div>

    <div class="results" id="results"></div>

    <script>
        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        const siteData = {
            "1337x": { 
                url: "https://1337x.to/search/{query}/1/",
                rating: 4.2, 
                ratingCount: 128,
                speed: "2.4MB/s" 
            },
            "TorrentGalaxy": { 
                url: "https://torrentgalaxy.to/torrents.php?search={query}",
                rating: 3.8, 
                ratingCount: 95,
                speed: "1.8MB/s" 
            },
            "SolidTorrents": { 
                url: "https://solidtorrents.net/search?q={query}",
                rating: 3.5, 
                ratingCount: 76,
                speed: "1.5MB/s" 
            },
            "Torlock": { 
                url: "https://www.torlock.com/all/torrents/{query}.html",
                rating: 3.2, 
                ratingCount: 64,
                speed: "1.2MB/s" 
            },
            "Snowfl": { 
                url: "https://snowfl.com/search?q={query}",
                rating: 3.0, 
                ratingCount: 42,
                speed: "1.0MB/s" 
            },
            "RARBG Mirror": { 
                url: "https://rargb.to/search/?search={query}",
                rating: 4.5, 
                ratingCount: 210,
                speed: "3.1MB/s" 
            },
            "Knaben": { 
                url: "https://knaben.org/?q={query}",
                rating: 2.8, 
                ratingCount: 38,
                speed: "0.9MB/s" 
            },
            "BTDig": { 
                url: "https://btdig.com/search?q={query}",
                rating: 3.7, 
                ratingCount: 87,
                speed: "1.6MB/s" 
            },
            "YTS": { 
                url: "https://yts.mx/browse-movies/{query}/all/all/0/latest",
                rating: 4.1, 
                ratingCount: 182,
                speed: "2.8MB/s" 
            },
            "Rutracker": { 
                url: "https://rutracker.org/forum/tracker.php?nm={query}",
                rating: 4.3, 
                ratingCount: 156,
                speed: "2.5MB/s" 
            },
            "Nyaa": { 
                url: "https://nyaa.si/?q={query}",
                rating: 4.7, 
                ratingCount: 203,
                speed: "3.5MB/s" 
            }
        };

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        let userData = JSON.parse(localStorage.getItem('userData')) || {
            ratings: {},
            favorites: [],
            searchHistory: []
        };

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        window.onload = function() {
            loadFavorites();
            const lastSearch = localStorage.getItem('lastSearch');
            if (lastSearch) {
                document.getElementById("searchInput").value = lastSearch;
            }
        };

        // Ø¹Ø±Ø¶ Ø§Ù„Ù†Ø¬ÙˆÙ…
        function renderStars(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5 ? 1 : 0;
            const emptyStars = 5 - fullStars - halfStar;
            
            let stars = '';
            for (let i = 0; i < fullStars; i++) stars += 'â˜…';
            if (halfStar) stars += 'Â½';
            for (let i = 0; i < emptyStars; i++) stars += 'â˜†';
            
            return stars;
        }

        // Ø§Ù„Ø¨Ø­Ø«
        function search() {
            const query = document.getElementById("searchInput").value.trim();
            if (!query) {
                alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ø¨Ø­Ø«");
                return;
            }
            
            // Ø­ÙØ¸ ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¨Ø­Ø«
            if (!userData.searchHistory.includes(query)) {
                userData.searchHistory.push(query);
                localStorage.setItem('userData', JSON.stringify(userData));
            }
            
            localStorage.setItem('lastSearch', query);
            performSearch(query);
        }

        // ØªÙ†ÙÙŠØ° Ø§Ù„Ø¨Ø­Ø«
        function performSearch(query) {
            const encodedQuery = encodeURIComponent(query).replace(/%20/g, "+");
            
            let resultHTML = "<h2>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«:</h2>";
            
            Object.entries(siteData).forEach(([siteName, data]) => {
                const url = data.url.replace('{query}', encodedQuery);
                const isFavorite = userData.favorites.includes(siteName);
                
                // Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
                const userRating = userData.ratings[siteName] || 0;
                const totalRatings = data.ratingCount + (userRating ? 1 : 0);
                const totalScore = (data.rating * data.ratingCount) + (userRating || 0);
                const finalRating = totalRatings > 0 ? (totalScore / totalRatings) : 0;
                
                resultHTML += `
                <div class="result-item ${isFavorite ? 'favorite-item' : ''}" 
                     data-rating="${finalRating.toFixed(1)}" 
                     data-name="${siteName}"
                     data-speed="${parseFloat(data.speed)}">
                    <div class="site-header">
                        <div class="site-name">${siteName} 
                            <span class="site-status" id="status-${siteName}">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚...</span>
                        </div>
                        <button class="favorite-toggle" onclick="toggleFavorite('${siteName}')">
                            ${isFavorite ? 'â˜…' : 'â˜†'}
                        </button>
                    </div>
                    <div class="rating">
                        <span class="stars">${renderStars(finalRating)}</span>
                        <span class="rating-count">(${finalRating.toFixed(1)}/5 - ${totalRatings} ØªÙ‚ÙŠÙŠÙ…Ø§Øª)</span>
                        <button class="rate-btn" onclick="showRatingForm('${siteName}')">Ù‚ÙŠÙ… Ù‡Ø°Ø§ Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
                    </div>
                    <div id="rating-form-${siteName}" class="rating-form">
                        <small>Ø§Ø®ØªØ± ØªÙ‚ÙŠÙŠÙ…Ùƒ:</small>
                        <select id="user-rating-${siteName}">
                            <option value="5">5 â˜…â˜…â˜…â˜…â˜…</option>
                            <option value="4">4 â˜…â˜…â˜…â˜…â˜†</option>
                            <option value="3">3 â˜…â˜…â˜…â˜†â˜†</option>
                            <option value="2">2 â˜…â˜…â˜†â˜†â˜†</option>
                            <option value="1">1 â˜…â˜†â˜†â˜†â˜†</option>
                        </select>
                        <button onclick="submitRating('${siteName}')">Ø­ÙØ¸</button>
                    </div>
                    <div class="site-stats">
                        <div class="stat">â±ï¸ ${data.speed}</div>
                        <div class="stat">ğŸ“Š ~${Math.floor(data.ratingCount * 1.5)} Ù†ØªÙŠØ¬Ø©</div>
                    </div>
                    <a href="${url}" class="result-link" target="_blank">${query}</a>
                </div>`;
            });
            
            document.getElementById("results").innerHTML = resultHTML;
            
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆØ§Ù‚Ø¹
            Object.keys(siteData).forEach(siteName => {
                checkSiteStatus(siteName, siteData[siteName].url.replace('{query}', 'test'));
            });
            
            // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙÙ„Ø§ØªØ± Ø§Ù„Ø­Ø§Ù„ÙŠØ©
            filterByRating();
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹
        async function checkSiteStatus(siteName, baseUrl) {
            const statusElement = document.getElementById(`status-${siteName}`);
            try {
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø®Ø¯Ù…Ø© CORS proxy Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…ÙˆÙ‚Ø¹
                const proxyUrl = `https://api.allorigins.win/get?url=${encodeURIComponent(baseUrl)}`;
                const response = await fetch(proxyUrl);
                
                if (response.ok) {
                    statusElement.textContent = "ğŸŸ¢ Ù…ØªØµÙ„";
                    statusElement.classList.add("online");
                } else {
                    statusElement.textContent = "ğŸ”´ ØºÙŠØ± Ù…ØªØµÙ„";
                    statusElement.classList.add("offline");
                }
            } catch (error) {
                statusElement.textContent = "ğŸ”´ ØºÙŠØ± Ù…ØªØµÙ„";
                statusElement.classList.add("offline");
            }
        }

        // ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
        function filterByRating() {
            const minRating = parseFloat(document.getElementById("ratingFilter").value);
            const items = document.querySelectorAll(".result-item");
            
            items.forEach(item => {
                const itemRating = parseFloat(item.getAttribute("data-rating"));
                item.style.display = itemRating >= minRating ? "block" : "none";
            });
        }

        // ØªØ±ØªÙŠØ¨ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        function sortResults() {
            const sortBy = document.getElementById("sortBy").value;
            const container = document.getElementById("results");
            const items = Array.from(document.querySelectorAll(".result-item"));
            
            items.sort((a, b) => {
                if (sortBy === "rating") {
                    return parseFloat(b.getAttribute("data-rating")) - parseFloat(a.getAttribute("data-rating"));
                } else if (sortBy === "name") {
                    return a.getAttribute("data-name").localeCompare(b.getAttribute("data-name"));
                }
                return 0;
            });
            
            items.forEach(item => container.appendChild(item));
        }

        // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ÙØ¶Ù„Ø©
        function toggleFavorite(siteName) {
            const index = userData.favorites.indexOf(siteName);
            if (index === -1) {
                userData.favorites.push(siteName);
            } else {
                userData.favorites.splice(index, 1);
            }
            
            localStorage.setItem('userData', JSON.stringify(userData));
            document.querySelector(`.result-item[data-name="${siteName}"]`).classList.toggle('favorite-item');
            loadFavorites();
        }

        function loadFavorites() {
            const favoritesList = document.getElementById("favorites-list");
            favoritesList.innerHTML = '';
            
            userData.favorites.forEach(siteName => {
                const favElement = document.createElement('div');
                favElement.className = 'favorite-tag';
                favElement.innerHTML = `
                    ${siteName}
                    <button onclick="removeFavorite('${siteName}')">âœ•</button>
                `;
                favoritesList.appendChild(favElement);
            });
        }

        function removeFavorite(siteName) {
            userData.favorites = userData.favorites.filter(name => name !== siteName);
            localStorage.setItem('userData', JSON.stringify(userData));
            loadFavorites();
            document.querySelector(`.result-item[data-name="${siteName}"]`).classList.remove('favorite-item');
        }

        function toggleFavorites() {
            document.getElementById("favorites-list").classList.toggle("hidden");
        }

        // Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
        function showRatingForm(siteName) {
            document.querySelectorAll(".rating-form").forEach(form => {
                form.classList.remove("active");
            });
            const form = document.getElementById(`rating-form-${siteName}`);
            form.classList.add("active");
            
            if (userData.ratings[siteName]) {
                document.getElementById(`user-rating-${siteName}`).value = userData.ratings[siteName];
            }
        }

        function submitRating(siteName) {
            const rating = parseInt(document.getElementById(`user-rating-${siteName}`).value);
            userData.ratings[siteName] = rating;
            localStorage.setItem('userData', JSON.stringify(userData));
            
            alert(`ØªÙ… Ø­ÙØ¸ ØªÙ‚ÙŠÙŠÙ…Ùƒ ${rating} Ù†Ø¬ÙˆÙ… Ù„Ù…ÙˆÙ‚Ø¹ ${siteName}`);
            document.getElementById(`rating-form-${siteName}`).classList.remove("active");
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
            search();
        }

        // Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª
        function applySuggestion(text) {
            const input = document.getElementById("searchInput");
            input.value = input.value ? `${input.value} ${text}` : text;
            input.focus();
        }

        // Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Enter
        document.getElementById("searchInput").addEventListener("keyup", function(event) {
            if (event.key === "Enter") {
                search();
            }
        });
    </script>
</body>
</html>
